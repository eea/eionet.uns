<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
     You can run this change log on your database as many times as you want, it will ignore the
     changes that are already applied. It also means that you can't modify an existing revision.
     Always add to the end.

     Use the maven goals: liquibase:update, liquibase:status or liquibase:changelogSync
      Potentially with -Dliquibase.dropFirst=true
     $Id$
 -->
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <!-- <property name="text.type" value="text" dbms="mysql"/> -->

    <changeSet author="heinlja" id="rev-1">
        <createTable tableName="ACL_ROWS">
            <column defaultValueNumeric="0" name="ACL_ID" type="INT">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="'object'" name="TYPE" type="enum('object','doc','dcc')">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="'user'" name="ENTRY_TYPE" type="enum('owner','user','localgroup','other','foreign','unauthenticated','authenticated','mask')">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="PRINCIPAL" type="CHAR(16)">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="PERMISSIONS" type="CHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="STATUS" type="INT"/>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
        <modifySql dbms="h2">
            <replace replace="enum('object','doc','dcc')" with="CHAR(6)"/>
            <replace replace="enum('owner','user','localgroup','other','foreign','unauthenticated','authenticated','mask')" with="CHAR(20)"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-2">
        <addPrimaryKey columnNames="ACL_ID, TYPE, ENTRY_TYPE, PRINCIPAL" tableName="ACL_ROWS"/>
    </changeSet>

    <changeSet author="heinlja" id="rev-3">
        <createTable tableName="ACLS">
            <column autoIncrement="true" name="ACL_ID" type="INT">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValue="" name="ACL_NAME" type="VARCHAR(100)">
                <constraints nullable="false"/>
            </column>
            <column name="PARENT_NAME" type="VARCHAR(100)"/>
            <column defaultValue="" name="OWNER" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="DESCRIPTION" type="VARCHAR(255)"/>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-4">
        <createIndex indexName="ACL_NAME" tableName="ACLS" unique="true">
            <column name="ACL_NAME"/>
            <column name="PARENT_NAME"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-5">
        <createTable tableName="CHANNEL">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column name="STYLESHEET_ID" type="INT UNSIGNED"/>
            <column name="NOTIFICATION_TEMPLATE_ID" type="INT UNSIGNED"/>
            <column defaultValueNumeric="0" name="CREATOR" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="TITLE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="DESCRIPTION" type="VARCHAR(255)"/>
            <column name="LAST_HARVEST" type="DATETIME"/>
            <column defaultValue="PULL" name="MODE" type="VARCHAR(4)">
                <constraints nullable="false"/>
            </column>
            <column name="FEED_URL" type="VARCHAR(255)"/>
            <column defaultValueNumeric="600" name="REFRESH_DELAY" type="INT UNSIGNED"/>
            <column defaultValue="0000-00-00 00:00:00" name="CREATION_DATE" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column defaultValueBoolean="false" name="CSTATUS" type="BIT">
                <constraints nullable="false"/>
            </column>
            <column name="SECONDARY_ID" type="VARCHAR(255)"/>
            <column defaultValue="" name="LANGUAGE_ID" type="CHAR(2)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-6">
        <createIndex indexName="CHANNEL_FKIndex3" tableName="CHANNEL" unique="false">
            <column name="STYLESHEET_ID"/>
        </createIndex>
        <createIndex indexName="IX_EEAUSER_FK" tableName="CHANNEL" unique="false">
            <column name="CREATOR"/>
        </createIndex>
        <createIndex indexName="IX_NAME_UNIQ1" tableName="CHANNEL" unique="true">
            <column name="TITLE"/>
        </createIndex>
        <createIndex indexName="IX_SECID_UNIQ1" tableName="CHANNEL" unique="true">
            <column name="SECONDARY_ID"/>
        </createIndex>
        <createIndex indexName="IX_TEMPLATE_FK" tableName="CHANNEL" unique="false">
            <column name="NOTIFICATION_TEMPLATE_ID"/>
        </createIndex>
        <createIndex indexName="IX_URL_UINQUE" tableName="CHANNEL" unique="true">
            <column name="FEED_URL"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-7">
        <createTable tableName="CHANNEL_DELIVERY_TYPE">
            <column defaultValueNumeric="0" name="CHANNEL_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="DELIVERY_TYPE_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-8">
        <addPrimaryKey columnNames="CHANNEL_ID, DELIVERY_TYPE_ID" tableName="CHANNEL_DELIVERY_TYPE"/>
        <createIndex indexName="IX_CHANNEL_FK1" tableName="CHANNEL_DELIVERY_TYPE" unique="false">
            <column name="CHANNEL_ID"/>
        </createIndex>
        <createIndex indexName="IX_DT_FK" tableName="CHANNEL_DELIVERY_TYPE" unique="false">
            <column name="DELIVERY_TYPE_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-9">
        <createTable tableName="CHANNEL_METADATA_ELEMENTS">
            <column defaultValueNumeric="0" name="CHANNEL_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="METADATA_ELEMENT_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="VISIBLE" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="APPEARANCE_ORDER" type="INT"/>
            <column defaultValueBoolean="false" name="FILTERED" type="BIT">
                <constraints nullable="false"/>
            </column>
            <column defaultValueBoolean="false" name="OBSOLETE" type="BIT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-10">
        <addPrimaryKey columnNames="CHANNEL_ID, METADATA_ELEMENT_ID" tableName="CHANNEL_METADATA_ELEMENTS"/>
        <createIndex indexName="IX_CHANNEL_FK2" tableName="CHANNEL_METADATA_ELEMENTS" unique="false">
            <column name="CHANNEL_ID"/>
        </createIndex>
        <createIndex indexName="IX_METADATA_ELEMENT_FK" tableName="CHANNEL_METADATA_ELEMENTS" unique="false">
            <column name="METADATA_ELEMENT_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-11">
        <createTable tableName="CHANNEL_ROLE">
            <column defaultValueNumeric="0" name="CHANNEL_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="EEA_ROLE_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-12">
        <addPrimaryKey columnNames="CHANNEL_ID, EEA_ROLE_ID" tableName="CHANNEL_ROLE"/>
        <createIndex indexName="IX_CHANNEL_FK3" tableName="CHANNEL_ROLE" unique="false">
            <column name="CHANNEL_ID"/>
        </createIndex>
        <createIndex indexName="IX_ROLE_FK" tableName="CHANNEL_ROLE" unique="false">
            <column name="EEA_ROLE_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-13">
        <createTable tableName="DELIVERY">
            <column defaultValueNumeric="0" name="NOTIFICATION_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="DELIVERY_TYPE_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="DELIVERY_STATUS" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="0000-00-00 00:00:00" name="DELIVERY_TIME" type="DATETIME">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-14">
        <addPrimaryKey columnNames="NOTIFICATION_ID, DELIVERY_TYPE_ID" tableName="DELIVERY"/>
        <createIndex indexName="IX_DELIVERY_TYPE_FK1" tableName="DELIVERY" unique="false">
            <column name="DELIVERY_TYPE_ID"/>
        </createIndex>
        <createIndex indexName="IX_DSTATUS" tableName="DELIVERY" unique="false">
            <column name="DELIVERY_STATUS"/>
        </createIndex>
        <createIndex indexName="IX_NOTIFICATION_FK" tableName="DELIVERY" unique="false">
            <column name="NOTIFICATION_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-15">
        <createTable tableName="DELIVERY_ADDRESS">
            <column defaultValueNumeric="0" name="EEA_USER_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="DELIVERY_TYPE_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column name="ADDRESS" type="VARCHAR(255)"/>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-16">
        <addPrimaryKey columnNames="EEA_USER_ID, DELIVERY_TYPE_ID" tableName="DELIVERY_ADDRESS"/>
        <createIndex indexName="IX_DELIVERY_TYPE_FK2" tableName="DELIVERY_ADDRESS" unique="false">
            <column name="DELIVERY_TYPE_ID"/>
        </createIndex>
        <createIndex indexName="IX_EEA_USER_FK1" tableName="DELIVERY_ADDRESS" unique="false">
            <column name="EEA_USER_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-17">
        <createTable tableName="DELIVERY_TYPE">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValue="" name="NAME" type="VARCHAR(45)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>

    <changeSet author="heinlja" id="rev-18">
        <createTable tableName="EEA_ROLE">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValue="" name="EXT_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-19">
        <createIndex indexName="Index_2" tableName="EEA_ROLE" unique="false">
            <column name="EXT_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-20">
        <createTable tableName="EEA_USER">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValue="" name="EXT_USER_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="CN" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="VACATION_EXPIRATION" type="DATETIME"/>
            <column defaultValueBoolean="false" name="VACATION_FLAG" type="BIT">
                <constraints nullable="false"/>
            </column>
            <column name="PAGE_REFRESH_DELAY" type="INT UNSIGNED"/>
            <column name="NUMCOLUMNS" type="SMALLINT UNSIGNED"/>
            <column defaultValueBoolean="false" name="PREFER_HTML" type="BIT">
                <constraints nullable="false"/>
            </column>
            <column defaultValueBoolean="true" name="PREFER_DASHBOARD" type="BIT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>

    <changeSet author="heinlja" id="rev-21">
        <createTable tableName="EVENT">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValueNumeric="0" name="CHANNEL_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="EXT_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="0000-00-00 00:00:00" name="CREATION_DATE" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="RTYPE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="PROCESSED" type="TINYINT UNSIGNED">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-22">
        <createIndex indexName="IX_CHANNEL_FK4" tableName="EVENT" unique="false">
            <column name="CHANNEL_ID"/>
        </createIndex>
        <createIndex indexName="IX_CREATION_DATE" tableName="EVENT" unique="false">
            <column name="CREATION_DATE"/>
        </createIndex>
        <createIndex indexName="IX_EXT_ID_UNIQ" tableName="EVENT" unique="true">
            <column name="EXT_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-23">
        <createTable tableName="EVENT_METADATA">
            <column defaultValueNumeric="0" name="EVENT_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="PROPERTY" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="VALUE" type="TEXT"/>
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-24">
        <createIndex indexName="EVENT_METADATA_FKIndex1" tableName="EVENT_METADATA" unique="false">
            <column name="EVENT_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-25">
        <createTable tableName="FILTER">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValueNumeric="0" name="SUBSCRIPTION_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-26">
        <createIndex indexName="IX_SUBSCRIPTION_FK" tableName="FILTER" unique="false">
            <column name="SUBSCRIPTION_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-27">
        <createTable tableName="METADATA_ELEMENTS">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValue="" name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-28">
        <createIndex indexName="IX_METADATANAME_UNIQ" tableName="METADATA_ELEMENTS" unique="true">
            <column name="NAME"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-29">
        <createTable tableName="NOTIFICATION">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValueNumeric="0" name="EEA_USER_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="EVENT_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column name="CONTENT" type="TEXT">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="CHANNEL_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column name="SUBJECT" type="VARCHAR(255)"/>
            <column name="HTML_CONTENT" type="TEXT"/>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-30">
        <createIndex indexName="IX_EEA_USER_FK2" tableName="NOTIFICATION" unique="false">
            <column name="EEA_USER_ID"/>
        </createIndex>
        <createIndex indexName="IX_EVENT_FK" tableName="NOTIFICATION" unique="false">
            <column name="EVENT_ID"/>
        </createIndex>
        <createIndex indexName="IX_USEREV_UNIQ" tableName="NOTIFICATION" unique="true">
            <column name="EEA_USER_ID"/>
            <column name="EVENT_ID"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-31">
        <createTable tableName="NOTIFICATION_TEMPLATE">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValue="" name="NAME" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="SUBJECT" type="VARCHAR(255)"/>
            <column name="TEXT_PLAIN" type="TEXT"/>
            <column name="TEXT_HTML" type="TEXT"/>
            <column defaultValueBoolean="false" name="EDIT_ONLY" type="BIT"/>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-32">
        <createIndex indexName="IX_TNAME_UNIQ" tableName="NOTIFICATION_TEMPLATE" unique="true">
            <column name="NAME"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-33">
        <createTable tableName="STATEMENT">
            <column name="FILTER_ID" type="INT UNSIGNED"/>
            <column defaultValue="" name="PROPERTY" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="VALUE" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="METADATA_ELEMENT_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-34">
        <createIndex indexName="FK_STATEMENT_2" tableName="STATEMENT" unique="false">
            <column name="METADATA_ELEMENT_ID"/>
        </createIndex>
        <createIndex indexName="IX_FILTER_FK" tableName="STATEMENT" unique="false">
            <column name="FILTER_ID"/>
        </createIndex>
        <createIndex indexName="IX_PROPERTY" tableName="STATEMENT" unique="false">
            <column name="PROPERTY"/>
        </createIndex>
        <createIndex indexName="IX_VALUE" tableName="STATEMENT" unique="false">
            <column name="VALUE"/>
        </createIndex>
    </changeSet>


    <changeSet author="heinlja" id="rev-35">
        <createTable tableName="STYLESHEET">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValue="" name="NAME" type="VARCHAR(50)">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="DESCRIPTION" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="CONTENT" type="TEXT">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-36">
        <createIndex indexName="IX_NAME_UNIQ2" tableName="STYLESHEET" unique="true">
            <column name="NAME"/>
        </createIndex>
    </changeSet>

    <changeSet author="heinlja" id="rev-37">
        <createTable tableName="SUBSCRIPTION">
            <column autoIncrement="true" name="ID" type="INT UNSIGNED">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValueNumeric="0" name="EEA_USER_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="CHANNEL_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column name="LEAD_TIME" type="INT UNSIGNED"/>
            <column defaultValue="0000-00-00 00:00:00" name="CREATION_DATE" type="DATETIME">
                <constraints nullable="false"/>
            </column>
            <column defaultValue="" name="SECONDARY_ID" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="DASH_CORD_X" type="SMALLINT"/>
            <column name="DASH_CORD_Y" type="SMALLINT"/>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-38">
        <createIndex indexName="IX_CHANNEL_FK5" tableName="SUBSCRIPTION" unique="false">
            <column name="CHANNEL_ID"/>
        </createIndex>
        <createIndex indexName="IX_EEA_USER_FK3" tableName="SUBSCRIPTION" unique="false">
            <column name="EEA_USER_ID"/>
        </createIndex>
        <createIndex indexName="IX_SCREATION_DATE" tableName="SUBSCRIPTION" unique="false">
            <column name="CREATION_DATE"/>
        </createIndex>
        <createIndex indexName="IX_SECID_UNIQ2" tableName="SUBSCRIPTION" unique="true">
            <column name="SECONDARY_ID"/>
        </createIndex>
        <createIndex indexName="IX_USER_CHANNEL_UNIQ" tableName="SUBSCRIPTION" unique="true">
            <column name="EEA_USER_ID"/>
            <column name="CHANNEL_ID"/>
        </createIndex>
    </changeSet>


    <changeSet author="heinlja" id="rev-39">
        <createTable tableName="SUBSCRIPTION_DT">
            <column defaultValueNumeric="0" name="SUBSCRIPTION_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
            <column defaultValueNumeric="0" name="DELIVERY_TYPE_ID" type="INT UNSIGNED">
                <constraints nullable="false"/>
            </column>
        </createTable>
        <modifySql dbms="mysql">
            <append value=" ENGINE=MyISAM DEFAULT CHARSET=utf8"/>
        </modifySql>
    </changeSet>
    <changeSet author="heinlja" id="rev-40">
        <addPrimaryKey columnNames="SUBSCRIPTION_ID, DELIVERY_TYPE_ID" tableName="SUBSCRIPTION_DT"/>
        <createIndex indexName="IX_DELIVERY_TYPE_FK3" tableName="SUBSCRIPTION_DT" unique="false">
            <column name="DELIVERY_TYPE_ID"/>
        </createIndex>
        <createIndex indexName="IX_SUBSCRIPTION" tableName="SUBSCRIPTION_DT" unique="false">
            <column name="SUBSCRIPTION_ID"/>
        </createIndex>
    </changeSet>

</databaseChangeLog>
